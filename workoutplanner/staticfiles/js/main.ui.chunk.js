(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{10:function(e,t,n){e.exports={MainControls:"TimerControls_MainControls__2K_xc",SecondaryControls:"TimerControls_SecondaryControls__12Qov",Toggle:"TimerControls_Toggle__1RN7I",Buttons:"TimerControls_Buttons__1DT3R",IconDesc:"TimerControls_IconDesc__2d27V",ToggleTitle:"TimerControls_ToggleTitle__2Sxp6",ExerciseName:"TimerControls_ExerciseName__2x2aT",Prev:"TimerControls_Prev__23QZn",Next:"TimerControls_Next__mLM8v"}},16:function(e,t,n){e.exports={Label:"Input_Label__3aM-8",FlexInput:"Input_FlexInput__2-f41",DualFlexInput:"Input_DualFlexInput__3EuH6"}},17:function(e,t,n){e.exports={WorkoutList:"WorkoutList_WorkoutList__1u63k",Title:"WorkoutList_Title__381LG",WorkoutListUL:"WorkoutList_WorkoutListUL__9Qo22",Button:"WorkoutList_Button__lo-fb",FlexButtons:"WorkoutList_FlexButtons__nuYL9"}},20:function(e,t,n){e.exports={LoginContainer:"Login_Register_LoginContainer__3xnKR",ButtonContainer:"Login_Register_ButtonContainer__2uxcn"}},21:function(e,t,n){e.exports={ListItem:"WorkoutListItems_ListItem__9HJSJ",Name:"WorkoutListItems_Name__2g7yY",Cycles:"WorkoutListItems_Cycles__2iWml",Duration:"WorkoutListItems_Duration__1mscQ",Count:"WorkoutListItems_Count__2y6Y1"}},24:function(e,t,n){e.exports={Exercise:"CreateExcerciseForm_Exercise__1ktVr",Buttons:"CreateExcerciseForm_Buttons__3s0T4"}},25:function(e,t,n){e.exports={ClockContainer:"Clock_ClockContainer__3p1V8",ClockCount:"Clock_ClockCount__fZJj8",Message:"Clock_Message__36Zba"}},26:function(e,t,n){e.exports={ListItem:"ExcerciseListItems_ListItem__2BoSH",Name:"ExcerciseListItems_Name__2ecrn",Reps:"ExcerciseListItems_Reps__B_nFe",Sets:"ExcerciseListItems_Sets__2vF9T"}},34:function(e,t,n){e.exports={Button:"Button_Button__3psbe"}},35:function(e,t,n){e.exports={Button:"FontAwesomeIcon_Button__2seLL"}},45:function(e,t,n){},46:function(e,t,n){e.exports={Layout:"Layout_Layout__DeR5a"}},49:function(e,t,n){e.exports={Workspace:"Workspace_Workspace__2Xia9"}},50:function(e,t,n){e.exports={Workout:"CreateWorkoutForm_Workout__2JEjB"}},51:function(e,t,n){e.exports={TimerContainer:"Timer_TimerContainer__8JOOu"}},57:function(e,t,n){},8:function(e,t,n){e.exports={Boxes:"TimerSummary_Boxes__v08Kw",Box:"TimerSummary_Box__1rG_h",Title:"TimerSummary_Title__3iMuW",Stats:"TimerSummary_Stats__3hZaw",RestState:"TimerSummary_RestState__9HkUc",RepState:"TimerSummary_RepState__1aaNC"}},82:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(18),o=n.n(r),a=(n(57),n(45)),u=n.n(a),i=n(46),l=n.n(i),d=n(17),j=n.n(d),O=n(6),b=n(12),f=n.n(b),x=function(e){return{type:"SET_WORKSPACE_STATE",state:e}},h=function(e){return function(t){var n={Authorization:"JWT ".concat(e)};f()("http://127.0.0.1:8000/api/workouts/",{headers:n}).then((function(e){t({type:"INITIALISE_WORKOUTS_FROM_FIREBASE",data:e.data.results})})).catch((function(e){return console.log(e.response)}))}},k=function(e){return{type:"SET_WORKSPACE_WORKOUT",workout:e}},p=function(e){return{type:"SAVE_REQUIRED",bool:e}},m=n(14),S=(f.a.create({baseURL:"http://127.0.0.1:8000/api/auth"}),function(e){return{type:"AUTH_SUCCESS",data:e}}),v=function(e){return{type:"AUTH_FAILURE",data:e}},_=n(7),w=n(48),g=n(3),E=n(21),W=n.n(E),R=n(15),C=n(0),N=Object(O.b)((function(e){return{workspaceState:e.util.workspaceState,workouts:e.workout.workouts}}),(function(e){return{selectWorkoutHandler:function(t){return e(k(t))},setWorkspaceState:function(t){return e(x(t))},setSaveRequired:function(t){return e(p(t))}}}))((function(e){var t=Object(C.jsx)(R.a,{icon:_.a,size:"sm"}),n=Object(C.jsx)(R.a,{icon:_.f,size:"sm"}),s=Object(C.jsx)(R.a,{icon:_.g,size:"sm"}),r=Object(c.useState)(0),o=Object(g.a)(r,2),a=o[0],u=o[1];Object(c.useEffect)((function(){i()}),[]);var i=function(){var t,n=0,c=e.workout,s=Object(w.a)(c.exercises);try{for(s.s();!(t=s.n()).done;){var r=t.value;n+=(r.lengthOfRep*r.noOfReps+r.restBetweenReps*(r.noOfReps-1))*r.noOfSets+(r.noOfSets-1)*r.restBetweenSets}}catch(a){s.e(a)}finally{s.f()}var o=(n+=(c.exercises.length-1)*c.restBetweenExercises)*c.cycles+(c.cycles-1)*c.restBetweenCycles;u(Math.ceil(o/60))};return Object(C.jsxs)("div",{className:W.a.ListItem,onClick:function(){e.selectWorkoutHandler(e.workout),e.setWorkspaceState("selectedWorkout"),e.setSaveRequired(!1)},children:[Object(C.jsx)("h5",{className:W.a.Name,children:e.workoutName.length>10?e.workoutName.slice(0,10)+"...":e.workoutName}),Object(C.jsxs)("div",{className:W.a.Duration,children:[n," "," ",a]}),Object(C.jsxs)("div",{className:W.a.Cycles,children:[t,"  "," ",e.cycles]}),Object(C.jsxs)("div",{className:W.a.Count,children:[e.exerciseCount,"  "," ",s]})]})})),y=n(34),B=n.n(y),T=s.a.memo((function(e){var t=[B.a.Button];return e.extraStyles&&(t=[B.a.Button,e.extraStyles].join(" ")),Object(C.jsx)("button",{style:e.style,ref:e.ref,onClick:e.clicked,type:e.type,disabled:e.disabled,className:[t],children:e.children})})),I=n(35),L=n.n(I),U=function(e){var t=e.classes?[L.a.Button,e.classes].join(" "):L.a.Button;return Object(C.jsxs)("button",{onClick:e.clicked,className:t,children:[e.children,Object(C.jsx)(R.a,{icon:e.icon,size:e.size,style:e.style})]})},A=Object(O.b)((function(e){return{currentUser:e.auth.currentUser,workspaceState:e.util.workspaceState,workouts:e.workout.workouts}}),(function(e){return{setWorkspaceState:function(t){return e(x(t))},logout:function(){return e({type:"LOGOUT"})}}}))((function(e){Object(c.useEffect)((function(){0===e.workouts.length&&e.setWorkspaceState("login/register")}),[]);var t=Object(C.jsx)("ul",{className:j.a.WorkoutListUL,children:e.workouts.map((function(e){return Object(C.jsx)(N,{id:e.id,cycles:e.cycles,workoutName:e.name,workout:e,exerciseCount:e.exercises.length,duration:"30"},e.id)}))});return Object(C.jsxs)("div",{className:j.a.WorkoutList,children:[Object(C.jsx)("h1",{className:j.a.Title,children:"Workout List"}),t,e.currentUser.token?Object(C.jsxs)("div",{className:j.a.FlexButtons,children:[Object(C.jsx)(T,{extraStyles:j.a.Button,clicked:function(){e.setWorkspaceState("creatingWorkout")},children:Object(C.jsx)(U,{icon:_.l})}),Object(C.jsx)(T,{extraStyles:j.a.Button,clicked:function(){e.setWorkspaceState("login/register"),e.logout()},children:Object(C.jsx)(U,{icon:_.m})})]}):null]})})),M=n(49),D=n.n(M),q=n(16),F=n.n(q),H=function(e){return Object(C.jsxs)("div",{className:F.a.FlexInput,children:[Object(C.jsx)("label",{className:F.a.Label,children:e.label}),Object(C.jsx)("input",{min:e.min,style:{width:"50px"},type:"number",value:e.value,placeholder:e.placeholder,onChange:e.changed})]})},z=function(e){return Object(C.jsxs)("div",{className:F.a.DualFlexInput,children:[Object(C.jsx)("label",{className:F.a.Label,children:e.label}),Object(C.jsx)("input",{min:e.minuteMin,style:{width:"50px",height:"30px"},type:"number",value:e.minuteVal,placeholder:e.minutePlaceholder,onChange:e.minuteChanged})," m",Object(C.jsx)("input",{min:e.min,style:{width:"50px",height:"30px"},type:"number",value:e.secondVal,placeholder:e.secondPlaceholder,onChange:e.secondChanged})," s"]})},P=function(e){return Object(C.jsxs)("div",{className:F.a.FlexInput,children:[Object(C.jsx)("label",{className:F.a.Label,children:e.label}),Object(C.jsx)("input",{type:"text",value:e.value,onChange:e.changed})]})},K=function(e){return Object(C.jsxs)("div",{className:F.a.FlexInput,children:[Object(C.jsx)("label",{className:F.a.Label,children:e.label}),Object(C.jsx)("input",{type:"password",value:e.value,onChange:e.changed})]})},J=n(24),V=n.n(J),X=n(31),G=n.n(X),Q=Object(O.b)((function(e){return{selectedExercise:e.util.selectedExercise,workspaceState:e.util.workspaceState,saveRequired:e.util.saveRequired}}),(function(e){return{createExerciseHandler:function(t,n,c,s,r,o,a){return e(function(e,t,n,c,s,r,o){return{type:"CREATE_EXERCISE",exerciseName:e,noOfReps:t,lengthOfRep:n,restBetweenReps:c,noOfSets:s,restBetweenSets:r,id:o}}(t,n,c,s,r,o,a))},setWorkspaceState:function(t){return e(x(t))},updateExercise:function(t,n,c,s,r,o,a){return e(function(e,t,n,c,s,r,o){return{type:"UPDATE_EXERCISE",id:e,exerciseName:t,noOfReps:n,lengthOfRep:c,restBetweenReps:s,noOfSets:r,restBetweenSets:o}}(t,n,c,s,r,o,a))},saveRequired:function(t){return e(p(t))}}}))((function(e){var t=Object(c.useState)(""),n=Object(g.a)(t,2),s=n[0],r=n[1],o=Object(c.useState)(1),a=Object(g.a)(o,2),u=a[0],i=a[1],l=Object(c.useState)(30),d=Object(g.a)(l,2),j=d[0],O=d[1],b=Object(c.useState)(0),f=Object(g.a)(b,2),x=f[0],h=f[1],k=Object(c.useState)(30),p=Object(g.a)(k,2),m=p[0],S=p[1],v=Object(c.useState)(30),_=Object(g.a)(v,2),w=_[0],E=_[1],W=Object(c.useState)(1),R=Object(g.a)(W,2),N=R[0],y=R[1],B=Object(c.useState)(30),I=Object(g.a)(B,2),L=I[0],U=I[1],A=Object(c.useState)(!1),M=Object(g.a)(A,2),D=M[0],q=M[1],F=Object(c.useState)(!1),K=Object(g.a)(F,2),J=K[0],X=K[1];Object(c.useEffect)((function(){if("editingExercise"===e.workspaceState){var t=e.selectedExercise;r(t.name),i(t.noOfReps),O(t.lengthOfRep%60),h(Math.floor(t.lengthOfRep/60)),E(t.restBetweenReps),y(t.noOfSets),U(t.restBetweenSets)}}),[]),Object(c.useEffect)((function(){S(60*x+j)}),[j,x]),Object(c.useEffect)((function(){q(!(""===s||u<1||m<1||w<1||N<1||L<1))}),[s,u,m,w,N,L]);return Object(C.jsxs)("div",{className:V.a.Exercise,children:["editingExercise"===e.workspaceState?Object(C.jsx)("h1",{children:"Editing Exercise"}):Object(C.jsx)("h1",{children:"Create an Exercise"}),Object(C.jsx)(P,{value:s,label:"Exercise Name",changed:function(e){X(!0),r(e.target.value)}}),Object(C.jsxs)("div",{className:V.a.Reps,children:[Object(C.jsx)("h4",{children:"Reps"}),Object(C.jsx)(H,{min:"1",label:"No. of Reps",value:u,changed:function(e){i(Math.floor(e.target.value)),X(!0)}}),Object(C.jsx)(z,{min:"0",minuteMin:"0",label:"Rep duration",minuteVal:x,secondVal:j,secondChanged:function(e){O(Math.floor(e.target.value)),X(!0)},minuteChanged:function(e){h(Math.floor(e.target.value)),X(!0)}}),u>1?Object(C.jsx)(H,{min:"1",label:"Rest between reps",value:w,changed:function(e){E(Math.floor(e.target.value)),X(!0)}}):null]}),Object(C.jsxs)("div",{className:V.a.Sets,children:[Object(C.jsx)("h4",{children:"Sets"}),Object(C.jsx)(H,{min:"1",label:"No. of Sets",value:N,changed:function(e){y(Math.floor(e.target.value)),X(!0)}}),N>1?Object(C.jsx)(H,{min:"1",label:"Rest between sets",value:L,changed:function(e){U(Math.floor(e.target.value)),X(!0)}}):null]}),Object(C.jsxs)("div",{className:V.a.Buttons,children:[Object(C.jsx)(T,{clicked:function(){e.setWorkspaceState("selectedWorkout")},children:"Cancel"}),"editingExercise"===e.workspaceState?Object(C.jsx)(T,{disabled:!D,clicked:function(){e.updateExercise(e.selectedExercise.id,s,u,m,w,N,L),e.setWorkspaceState("selectedWorkout"),J&&e.saveRequired(!0)},children:"Done"}):Object(C.jsx)(T,{disabled:!D,clicked:function(){e.createExerciseHandler(s,u,m,w,N,L,G()().toString()),e.setWorkspaceState("selectedWorkout"),e.saveRequired(!0)},children:"Add New Exercise"})]})]})})),Z=n(50),Y=n.n(Z),$=Object(O.b)((function(e){return{workspaceState:e.util.workspaceState,currentUser:e.auth.currentUser,workouts:e.workout.workouts}}),(function(e){return{createWorkoutHandler:function(t,n,c){return e(function(e,t,n){return{type:"CREATE_WORKOUT",workoutName:e,cycles:t,id:n}}(t,n,c))},setWorkspaceState:function(t){return e(x(t))},setSaveRequired:function(t){return e(p(t))},fetchWorkouts:function(t){return e(h(t))},selectWorkoutHandler:function(t){return e(k(t))}}}))((function(e){var t=Object(c.useState)(null),n=Object(g.a)(t,2),s=n[0],r=n[1],o=Object(c.useState)(""),a=Object(g.a)(o,2),u=a[0],i=a[1],l=Object(c.useState)(!1),d=Object(g.a)(l,2),j=d[0],O=d[1];Object(c.useEffect)((function(){O(""!==u)}),[u]),Object(c.useEffect)((function(){if(null!==s){e.setSaveRequired(!1);var t=e.workouts.filter((function(e){return e.id===s}));e.selectWorkoutHandler.apply(e,Object(m.a)(t)),e.setWorkspaceState("selectedWorkout")}}),[e.workouts]);return Object(C.jsxs)("div",{className:Y.a.Workout,children:[Object(C.jsx)("h3",{children:"Create a New Workout"}),Object(C.jsx)(P,{label:"Workout Name",changed:function(e){return i(e.target.value)}}),Object(C.jsx)(T,{disabled:!j,clicked:function(){var t={name:u,cycles:1,restBetweenExercises:30,restBetweenCycles:30,exercises:null},n={Authorization:"JWT ".concat(e.currentUser.token)};f.a.post("http://127.0.0.1:8000/api/workouts/",t,{headers:n}).then((function(t){r(t.data.id),e.fetchWorkouts(e.currentUser.token)})).catch((function(e){return console.log(e)}))},children:"Create New Workout"}),Object(C.jsx)(T,{clicked:function(){e.setWorkspaceState("nothing selected")},children:"Cancel"})]})})),ee=n(10),te=n.n(ee),ne=function(e){var t=e.paused?Object(C.jsx)(U,{icon:_.k,clicked:e.play,size:"3x"}):Object(C.jsx)(U,{icon:_.j,clicked:e.pause,size:"3x"}),n=Object(C.jsx)(U,{icon:_.o,clicked:e.stepForward,size:"2x"}),c=Object(C.jsx)(U,{icon:_.n,clicked:e.stepBackward,size:"2x"}),s=Object(C.jsx)(U,{icon:_.b,clicked:e.backward,size:"2x"}),r=Object(C.jsx)(U,{icon:_.i,clicked:e.forward,size:"2x"});return Object(C.jsxs)("div",{className:te.a.Controls,children:[Object(C.jsxs)("div",{className:te.a.SecondaryControls,children:[Object(C.jsx)(U,{icon:_.d,size:"3x",clicked:function(){return e.prevExercise()}}),Object(C.jsxs)("div",{className:te.a.Toggle,children:[Object(C.jsx)("h4",{className:te.a.Prev,children:e.first?null:e.prevName}),Object(C.jsx)("h1",{className:te.a.ExerciseName,children:e.name}),Object(C.jsx)("h4",{className:te.a.Next,children:e.last?null:e.nextName})]}),Object(C.jsx)(U,{icon:_.e,size:"3x",clicked:function(){return e.nextExercise()}})]}),Object(C.jsxs)("div",{className:te.a.MainControls,children:[Object(C.jsxs)("div",{className:te.a.Buttons,children:[c,Object(C.jsx)("p",{className:te.a.IconDesc,children:"Set"})]}),Object(C.jsxs)("div",{className:te.a.Buttons,children:[s,Object(C.jsx)("p",{className:te.a.IconDesc,children:"Rep"})]}),t,Object(C.jsxs)("div",{className:te.a.Buttons,children:[r,Object(C.jsx)("p",{className:te.a.IconDesc,children:"Rep"})]}),Object(C.jsxs)("div",{className:te.a.Buttons,children:[n,Object(C.jsx)("p",{className:te.a.IconDesc,children:"Set"})]})]})]})},ce=n(8),se=n.n(ce),re=n(25),oe=n.n(re),ae=function(e){var t,n,c="countdown"===e.restState?"Get Ready":"work"===e.restState?"Go!":"Rest";return e.clockcount>59&&((t=e.clockcount%60)<10&&(t="0".concat(t)),n=Math.floor(e.clockcount/60)),Object(C.jsxs)("div",{className:oe.a.ClockContainer,children:[Object(C.jsx)("p",{className:oe.a.Message,children:c}),e.clockcount>59?Object(C.jsxs)("p",{className:oe.a.ClockCount,children:[n,":",t]}):Object(C.jsx)("p",{className:oe.a.ClockCount,children:e.clockcount})]})},ue=function(e){var t,n,c=Object(C.jsxs)("div",{children:[e.CEI+(e.currentCycle-1)*e.totalExercises," / ",e.totalExercises*e.totalCycles]});switch(e.workoutState){case"countdown":n="countdown",t=e.countdown;break;case"reps":n="work",t=e.timeLeftOfRep;break;case"rest between reps":n="rest",t=e.timeLeftOfRestBetweenReps;break;case"rest between sets":n="rest",t=e.timeLeftOfRest;break;case"rest between cycles":n="rest",t=e.timeLeftOfRestBetweenCycles;break;case"rest between exercises":n="rest",t=e.timeLeftOfRestBetweenExercises;break;default:throw Error({message:"crikey"})}n?se.a.RestState:se.a.RepState;return Object(C.jsxs)("div",{className:se.a.SummaryContainer,children:[Object(C.jsx)(ae,{workoutState:e.workoutState,clockcount:t,restState:n}),Object(C.jsxs)("div",{className:se.a.Boxes,children:[Object(C.jsxs)("div",{className:se.a.Box,children:[Object(C.jsx)("h6",{className:se.a.Title,children:"Exercise"}),Object(C.jsx)("div",{className:se.a.Stats,children:c})]}),Object(C.jsxs)("div",{className:se.a.Box,children:[Object(C.jsx)("h2",{className:se.a.Title,children:"Reps"}),Object(C.jsxs)("h3",{className:se.a.Stats,children:[e.currentRep," / ",e.noOfReps]})]}),Object(C.jsxs)("div",{className:se.a.Box,children:[Object(C.jsx)("h2",{className:se.a.Title,children:"Sets"}),Object(C.jsxs)("h3",{className:se.a.Stats,children:[e.currentSet," / ",e.noOfSets]})]}),Object(C.jsxs)("div",{className:se.a.Box,children:[Object(C.jsx)("h6",{className:se.a.Title,children:"Cycle"}),Object(C.jsxs)("p",{className:se.a.Stats,children:[e.currentCycle," / ",e.totalCycles]})]})]})]})},ie=n(51),le=n.n(ie),de=function(e){var t=e.selectedWorkout.cycles,n=Object(c.useState)(1),s=Object(g.a)(n,2),r=s[0],o=s[1],a=Object(c.useState)(0),u=Object(g.a)(a,2),i=u[0],l=u[1],d=e.selectedWorkout.exercises.length,j=Object(c.useState)(e.selectedWorkout.exercises[i]),O=Object(g.a)(j,2),b=O[0],f=O[1],x=Object(c.useState)(10),h=Object(g.a)(x,2),k=h[0],p=h[1],m=Object(c.useState)(!0),S=Object(g.a)(m,2),v=S[0],_=S[1],w=Object(c.useState)(1),E=Object(g.a)(w,2),W=E[0],R=E[1],N=b.noOfSets,y=Object(c.useState)(1),B=Object(g.a)(y,2),T=B[0],I=B[1],L=b.lengthOfRep,U=Object(c.useState)(L),A=Object(g.a)(U,2),M=A[0],D=A[1],q=b.noOfReps,F=b.restBetweenSets,H=Object(c.useState)(F),z=Object(g.a)(H,2),P=z[0],K=z[1],J=b.restBetweenReps,V=Object(c.useState)(J),X=Object(g.a)(V,2),G=X[0],Q=X[1],Z=e.selectedWorkout.restBetweenExercises,Y=Object(c.useState)(Z),$=Object(g.a)(Y,2),ee=$[0],te=$[1],ce=e.selectedWorkout.restBetweenCycles,se=Object(c.useState)(ce),re=Object(g.a)(se,2),oe=re[0],ae=re[1],ie=Object(c.useState)(null),de=Object(g.a)(ie,2),je=de[0],Oe=de[1],be=Object(c.useState)(!1),fe=Object(g.a)(be,2),xe=(fe[0],fe[1]),he=Object(c.useState)(!1),ke=Object(g.a)(he,2),pe=(ke[0],ke[1],Object(c.useState)(!1)),me=Object(g.a)(pe,2),Se=(me[0],me[1],Object(c.useState)("countdown")),ve=Object(g.a)(Se,2),_e=ve[0],we=ve[1];Object(c.useEffect)((function(){0===k&&(clearInterval(je),Re())}),[k]);Object(c.useEffect)((function(){f(e.selectedWorkout.exercises[i])}),[i]),Object(c.useEffect)((function(){"countdown"!==_e&&Re()}),[b]),Object(c.useEffect)((function(){0===ee&&(clearInterval(je),l((function(e){return e+1})),R(1),I(1),te(Z))}),[ee]);var ge=function(){we("rest between exercises");var e=setInterval((function(){te((function(e){return e-1}))}),1e3);Oe(e)};Object(c.useEffect)((function(){0===oe&&(ae(ce),o((function(e){return e+1})),l(0),Re())}),[oe]);var Ee=function(){if(r===t)xe(!0);else{D(L),we("rest between cycles"),R(1),I(1);var e=setInterval((function(){ae((function(e){return e-1}))}),1e3);Oe(e)}};Object(c.useEffect)((function(){0===M&&(clearInterval(je),D(L),W!==N||T!==q?T<q?(Q(J),Ce()):(K(F),Ne()):i===d-1?Ee():ge())}),[M]);var We=function(){we("reps");var e=setInterval((function(){D((function(e){return e-1}))}),1e3);Oe(e)},Re=function(){clearInterval(je),D(L),W<=N&&We()};Object(c.useEffect)((function(){0===G&&"countdown"!==_e&&(D(L),We(),I((function(e){return e+1})),clearInterval(je),Q(J))}),[G]);var Ce=function(){we("rest between reps");var e=setInterval((function(){Q((function(e){return e-1}))}),1e3);Oe(e)};Object(c.useEffect)((function(){0===P&&"countdown"!==_e&&(clearInterval(je),R((function(e){return e+1})),I(1),Re())}),[P]);var Ne=function(){we("rest between sets");var e=setInterval((function(){K((function(e){return e-1}))}),1e3);Oe(e)},ye=function(){switch(_(!1),_e){case"countdown":return function(){var e=setInterval((function(){p((function(e){return e-1}))}),1e3);Oe(e)}();case"reps":return We();case"rest between reps":return Ce();case"rest between sets":return Ne();case"rest between cycles":return Ee();case"rest between exercises":return ge();default:throw Error({message:"crikey"})}};return Object(C.jsxs)("div",{className:le.a.TimerContainer,children:[Object(C.jsx)(ue,{CEI:i+1,currentCycle:r,totalExercises:d,noOfReps:q,noOfSets:N,totalCycles:t,currentRep:T,currentSet:W,countdown:k,workoutState:_e,timeLeftOfRep:M,timeLeftOfRest:P,timeLeftOfRestBetweenCycles:oe,timeLeftOfRestBetweenExercises:ee,timeLeftOfRestBetweenReps:G,paused:v}),Object(C.jsx)(ne,{first:0===i&&1===r,last:i*r===(d-1)*t,prevName:e.selectedWorkout.exercises[i-1]?e.selectedWorkout.exercises[i-1].name:e.selectedWorkout.exercises[e.selectedWorkout.exercises.length-1].name,nextName:i+1<d?e.selectedWorkout.exercises[i+1].name:e.selectedWorkout.exercises[0].name,name:b.name,paused:v,stepForward:function(){return D(L),p(10),_(!0),we("countdown"),clearInterval(je),void(W<N&&(I(1),R((function(e){return e+1}))))},stepBackward:function(){return D(L),p(10),_(!0),we("countdown"),clearInterval(je),void(W>1&&(I(1),R((function(e){return e-1}))))},backward:function(){return D(L),p(10),_(!0),we("countdown"),clearInterval(je),void(T>1&&I((function(e){return e-1})))},forward:function(){return _(!0),p(10),D(L),we("countdown"),clearInterval(je),void(T<q&&I((function(e){return e+1})))},play:function(){return ye()},pause:function(){return _(!0),void clearInterval(je)},nextExercise:function(){_(!0),D(L),p(10),we("countdown"),clearInterval(je),I(1),R(1),i+1<d&&l((function(e){return e+1})),i+1===d&&r<t&&(l(0),o((function(e){return e+1})))},prevExercise:function(){_(!0),D(L),p(10),we("countdown"),clearInterval(je),I(1),R(1),i+1>1&&l((function(e){return e-1})),0===i&&r>1&&(l(d-1),o((function(e){return e-1})))}})]})},je=n(4),Oe=n(9),be=n.n(Oe),fe=n(26),xe=n.n(fe),he=Object(O.b)(null,(function(e){return{setWorkspaceState:function(t){return e(x(t))},setSaveRequired:function(t){return e(p(t))}}}))((function(e){return Object(C.jsxs)("li",{className:xe.a.ListItem,children:[Object(C.jsx)("div",{className:xe.a.Name,children:Object(C.jsx)("h4",{children:e.name})}),Object(C.jsx)("div",{className:xe.a.Sets,children:Object(C.jsxs)("h5",{children:["Sets x ",e.noOfSets]})}),Object(C.jsx)("div",{className:xe.a.Reps,children:Object(C.jsxs)("h5",{children:["Reps x ",e.noOfReps]})})]})})),ke=n(28),pe=function(e){var t=e.workout,n=e.setSaveRequired,s=e.updateWorkout,r=Object(c.useState)(t.cycles),o=Object(g.a)(r,2),a=o[0],u=o[1],i=Object(c.useState)(30),l=Object(g.a)(i,2),d=l[0],j=l[1],O=Object(c.useState)(0),b=Object(g.a)(O,2),f=b[0],x=b[1],h=Object(c.useState)(30),k=Object(g.a)(h,2),p=k[0],m=k[1],S=Object(c.useState)(0),v=Object(g.a)(S,2),_=v[0],w=v[1];return Object(c.useEffect)((function(){f<=0&&d<=0||_<=0&&p<=0||s(a,Number(60*_)+Number(p),Number(60*f)+Number(d))}),[a,f,d,_,p]),Object(c.useEffect)((function(){u(t.cycles),j(t.restBetweenCycles%60),x(Math.floor(t.restBetweenCycles/60)),m(t.restBetweenExercises%60),w(Math.floor(t.restBetweenExercises/60))}),[t]),Object(C.jsxs)("div",{children:[Object(C.jsx)(H,{min:"1",label:"Workout Cycles",value:a,changed:function(e){u(e.target.value),n(!0)}}),a>1?Object(C.jsx)(z,{min:"1",minuteMin:"0",label:"Rest Between Cycles",minuteVal:f,secondVal:d,minuteChanged:function(e){x(e.target.value),n(!0)},secondChanged:function(e){j(e.target.value),n(!0)}}):null,t.exercises.length>1?Object(C.jsx)(z,{minuteMin:"0",min:"1",label:"Rest Between Exercises",minuteVal:_,secondVal:p,minuteChanged:function(e){w(e.target.value),n(!0)},secondChanged:function(e){m(e.target.value),n(!0)}}):null]})},me=Object(O.b)((function(e){return{workouts:e.workout.workouts,selectedWorkout:e.util.selectedWorkout,saveRequired:e.util.saveRequired,currentUser:e.auth.currentUser}}),(function(e){return{switchExercises:function(t,n){return e(function(e,t){return{type:"SWITCH_EXERCISES",id1:e,id2:t}}(t,n))},setWorkspaceState:function(t){return e(x(t))},setSaveRequired:function(t){return e(p(t))},fetchWorkouts:function(t){return e(h(t))},selectWorkoutHandler:function(t){return e(k(t))},updateWorkout:function(t,n,c){return e(function(e,t,n){return{type:"UPDATE_WORKOUT",cycles:e,restBetweenExercises:t,restBetweenCycles:n}}(t,n,c))},setSelectedExercise:function(t,n,c,s,r,o,a){return e(function(e,t,n,c,s,r,o){return{type:"SET_SELECTED_EXERCISE",id:e,name:t,noOfSets:n,noOfReps:c,lengthOfRep:s,restBetweenReps:r,restBetweenSets:o}}(t,n,c,s,r,o,a))},deleteExercise:function(t){return e(function(e){return{type:"DELETE_EXERCISE",id:e}}(t))}}}))((function(e){var t=Object(c.useState)(!1),n=Object(g.a)(t,2),s=n[0],r=n[1],o=Object(c.useState)(!1),a=Object(g.a)(o,2),u=(a[0],a[1]),i=Object(c.useRef)(null);Object(c.useEffect)((function(){e.saveRequired&&i.current.scrollIntoView()}),[e.saveRequired]);var l=function(t){e.setWorkspaceState(t)};return Object(C.jsxs)("div",{className:be.a.SelectedWorkout,children:[Object(C.jsxs)("div",{className:be.a.DraggableList,children:[Object(C.jsxs)("div",{className:be.a.WorkoutTitle,children:[Object(C.jsx)("h2",{className:be.a.WorkoutH1,children:e.selectedWorkout.name}),s?Object(C.jsxs)("div",{className:be.a.WorkoutIcon,children:[Object(C.jsx)("p",{className:be.a.Confirm,children:"Confirm"}),Object(C.jsx)(U,{clicked:function(){var t={Authorization:"JWT ".concat(e.currentUser.token)};f.a.delete("http://127.0.0.1:8000/api/workouts/".concat(e.selectedWorkout.id),{headers:t}).then((function(t){e.fetchWorkouts(e.currentUser.token),e.setSaveRequired(!1),e.setWorkspaceState("nothing selected")})).catch((function(e){return console.log(e)}))},icon:_.c,size:"1x"}),Object(C.jsx)(U,{classes:be.a.WorkoutIcon,clicked:function(){return r(!1)},icon:_.p,size:"1x"})]}):Object(C.jsx)(U,{classes:be.a.WorkoutIcon,clicked:function(){return r(!0)},icon:_.q,size:"2x"})]}),Object(C.jsx)(ke.a,{onDragEnd:function(t){u(!1),e.saveRequired||t.source.index===t.destination.index||e.setSaveRequired(!0),e.switchExercises(t.source.index,t.destination.index)},onDragStart:function(){return u(!0)},children:Object(C.jsx)(ke.c,{droppableId:"workoutList",children:function(t){return Object(C.jsxs)("ul",Object(je.a)(Object(je.a)({className:be.a.UL,ref:t.innerRef},t.droppableProps),{},{children:[e.selectedWorkout.exercises.map((function(t,n){return Object(C.jsx)("div",{children:Object(C.jsx)(ke.b,{draggableId:t.id,index:n,children:function(n){return Object(C.jsxs)("div",Object(je.a)(Object(je.a)(Object(je.a)({className:be.a.Draggable},n.dragHandleProps),n.draggableProps),{},{ref:n.innerRef,children:[Object(C.jsx)(he,{id:t.id,name:t.name,noOfSets:t.noOfSets,noOfReps:t.noOfReps,lengthOfRep:t.lengthOfRep,restBetweenReps:t.restBetweenReps,restBetweenSets:t.restBetweenSets}),Object(C.jsxs)("div",{children:[Object(C.jsxs)(T,{clicked:function(){return n=t.id,c=t.name,s=t.noOfSets,r=t.noOfReps,o=t.lengthOfRep,a=t.restBetweenReps,u=t.restBetweenSets,e.setSelectedExercise(n,c,s,r,o,a,u),void e.setWorkspaceState("editingExercise");var n,c,s,r,o,a,u},extraStyles:be.a.Button,children:[Object(C.jsx)(R.a,{icon:_.h}),Object(C.jsx)("button",{className:be.a.ButtonAbs})]}),Object(C.jsxs)(T,{clicked:function(){return n=t.id,e.deleteExercise(n),void e.setSaveRequired(!0);var n},extraStyles:be.a.Button,children:[Object(C.jsx)(R.a,{icon:_.q}),Object(C.jsx)("button",{className:be.a.ButtonAbs})]})]})]}),t.id)}},t.id)},t.id)})),t.placeholder]}),"exerciseList")}})})]}),Object(C.jsx)("div",{className:be.a.EditWorkoutForm,children:Object(C.jsx)(pe,{workout:e.selectedWorkout,setSaveRequired:e.setSaveRequired,updateWorkout:e.updateWorkout})}),Object(C.jsxs)("div",{className:be.a.SelectedControls,children:[e.saveRequired?Object(C.jsx)(T,{clicked:function(){return function(){e.fetchWorkouts(e.currentUser.token);var t=e.workouts.filter((function(t){return t.id===e.selectedWorkout.id}));e.selectWorkoutHandler.apply(e,Object(m.a)(t)),e.setSaveRequired(!1)}()},children:"Discard Changes"}):Object(C.jsx)(T,{clicked:function(){return l("creatingExcercise")},children:"Add Exercise"}),0===e.selectedWorkout.exercises.length||e.saveRequired?null:Object(C.jsx)(T,{clicked:function(){return l("exercising")},children:"Begin Workout"}),e.saveRequired?Object(C.jsx)(T,{disabled:e.selectedWorkout.cycles<1||e.selectedWorkout.restBetweenExercises<1||e.selectedWorkout.restBetweenCycles<1,style:{color:"red"},clicked:function(){return function(){var t={Authorization:"JWT ".concat(e.currentUser.token)};f.a.patch("http://127.0.0.1:8000/api/workouts/".concat(e.selectedWorkout.id,"/"),e.selectedWorkout,{headers:t}).then((function(t){e.fetchWorkouts(e.currentUser.token),e.setSaveRequired(!1)})).catch((function(e){return console.log(e)}))}()},children:"Save Changes"}):null]}),Object(C.jsx)("div",{ref:i})]})})),Se=n(20),ve=n.n(Se),_e=Object(O.b)((function(e){return{authMessage:e.auth.authMessage,currentUser:e.auth.currentUser}}),(function(e){return{logout:function(){return e({type:"LOGOUT"})},setWorkspaceState:function(t){return e(x(t))},register:function(t,n,c,s){return e(function(e,t,n,c){return function(s){var r={username:e,email:t,password:n,password2:c};f.a.post("http://127.0.0.1:8000/api/auth/register/",r).then((function(e){s(S(JSON.parse(e.data).data))})).catch((function(e){var t=[];try{var n=JSON.parse(e.response.data).errors;for(var c in n){var r;(r=t).push.apply(r,Object(m.a)(n[c]))}}catch(o){t=["Something went wrong signing up"]}s(v(t))}))}}(t,n,c,s))},login:function(t,n,c){return e(function(e,t,n){return function(c){var s={},r={username:e,password:t};null!==n&&(f.a.post("http://127.0.0.1:8000/api/auth/refresh/",{token:n}).then((function(e){n=e.data.token})).catch((function(e){return console.log(e)})),s={Authorization:"JWT ".concat(n)}),f.a.post("http://127.0.0.1:8000/api/auth/login/",r,{headers:s}).then((function(e){console.log(e),c(S(e.data))})).catch((function(e){console.log(e.response),c(v([e.response.data.error,e.response.data.detail]))}))}}(t,n,c))},clearWorkouts:function(){return e({type:"CLEAR_WORKOUTS"})},fetchWorkouts:function(t){return e(h(t))}}}))((function(e){var t=e.currentUser,n=e.fetchWorkouts,s=e.logout,r=e.clearWorkouts,o=e.setWorkspaceState,a=e.login,u=e.register,i=e.authMessage,l=Object(c.useState)(!0),d=Object(g.a)(l,2),j=d[0],O=d[1],b=Object(c.useState)(null),f=Object(g.a)(b,2),x=f[0],h=f[1],k=Object(c.useState)(null),p=Object(g.a)(k,2),m=p[0],S=p[1],v=Object(c.useState)(null),_=Object(g.a)(v,2),w=_[0],E=_[1],W=Object(c.useState)(null),R=Object(g.a)(W,2),N=R[0],y=R[1];Object(c.useEffect)((function(){s(),r()}),[]),Object(c.useEffect)((function(){null!=t.token&&(o("nothing selected"),n(t.token))}),[t.token]);return Object(C.jsxs)("div",{className:ve.a.LoginContainer,children:[Object(C.jsxs)("h2",{children:[j?"Login":"Register"," Page"]}),Object(C.jsx)(T,{extraStyles:ve.a.ButtonContainer,clicked:function(){return O(!j)},children:j?"Switch to Register":"Switch to Login"}),Object(C.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j?a(x,w,t.token):u(x,m,w,N)},children:[Object(C.jsx)(P,{label:"Username",changed:function(e){return h(e.target.value)},value:x}),j?null:Object(C.jsx)(P,{label:"Email",changed:function(e){return S(e.target.value)},value:m}),Object(C.jsx)(K,{label:"Password",changed:function(e){return E(e.target.value)},value:w}),j?null:Object(C.jsx)(K,{label:"Confirm Password",changed:function(e){return y(e.target.value)},value:N}),Object(C.jsx)(T,{extraStyles:ve.a.ButtonContainer,type:"submit",children:j?"Login":"Register"})]}),i.map((function(e,t){return Object(C.jsx)("h6",{children:e},t)}))]})})),we=Object(O.b)((function(e){return{currentUser:e.auth.currentUser}}),(function(e){return{setWorkspaceState:function(t){return e(x(t))},logout:function(){return e({type:"LOGOUT"})},clearWorkouts:function(){return e({type:"CLEAR_WORKOUTS"})}}}))((function(e){Object(c.useEffect)((function(){null==e.currentUser.token&&e.setWorkspaceState("login/register")}));return Object(C.jsxs)("div",{className:ve.a.LogoutContainer,children:[Object(C.jsxs)("h3",{children:["Thanks ",e.currentUser.username," - Click here to logout"]}),Object(C.jsx)(T,{clicked:function(){e.logout(),e.clearWorkouts(),e.setWorkspaceState("login/register")},children:"Logout"})]})})),ge=Object(O.b)((function(e){return{workspaceState:e.util.workspaceState,selectedWorkout:e.util.selectedWorkout}}),(function(e){return{setWorkspaceState:function(t){return e(x(t))}}}))((function(e){var t;switch(e.workspaceState){case"nothing selected":t=Object(C.jsx)("h3",{children:"Please select a workout"});break;case"login/register":t=Object(C.jsx)(_e,{});break;case"logout":t=Object(C.jsx)(we,{});break;case"creatingWorkout":t=Object(C.jsx)($,{});break;case"creatingExcercise":case"editingExercise":t=Object(C.jsx)(Q,{});break;case"exercising":t=Object(C.jsx)(de,{selectedWorkout:e.selectedWorkout});break;case"selectedWorkout":t=Object(C.jsx)(me,{});break;default:throw new Error("no case found")}return Object(C.jsx)("div",{className:D.a.Workspace,children:t})})),Ee=function(e){return Object(C.jsxs)("div",{className:l.a.Layout,children:[Object(C.jsx)(A,{}),Object(C.jsx)(ge,{}),e.children]})},We=function(){return Object(C.jsx)("div",{className:u.a.App,children:Object(C.jsx)(Ee,{})})},Re={workouts:[]},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_WORKOUT":return Object(je.a)(Object(je.a)({},e),{},{workouts:Object(m.a)(e.workouts.concat([{id:t.id,cycles:1,name:t.workoutName,exercises:[],restBetweenExercises:30,restBetweenCycles:30}]))});case"INITIALISE_WORKOUTS_FROM_FIREBASE":return Object(je.a)(Object(je.a)({},e),{},{workouts:Object.values(t.data)});case"CLEAR_WORKOUTS":return Object(je.a)(Object(je.a)({},e),{},{workouts:[]});default:return e}},Ne={workspaceState:"login/register",saveRequired:!1,selectedExercise:{},selectedWorkout:{exercises:[]}},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACE_STATE":return Object(je.a)(Object(je.a)({},e),{},{workspaceState:t.state});case"SET_SELECTED_EXERCISE":return Object(je.a)(Object(je.a)({},e),{},{selectedExercise:{id:t.id,name:t.name,noOfSets:t.noOfSets,noOfReps:t.noOfReps,lengthOfRep:t.lengthOfRep,restBetweenReps:t.restBetweenReps,restBetweenSets:t.restBetweenSets}});case"SAVE_REQUIRED":return Object(je.a)(Object(je.a)({},e),{},{saveRequired:t.bool});case"SET_WORKSPACE_WORKOUT":return Object(je.a)(Object(je.a)({},e),{},{selectedWorkout:t.workout});case"SWITCH_EXERCISES":var n=Object(m.a)(e.selectedWorkout.exercises),c=n.splice(t.id1,1),s=Object(g.a)(c,1),r=s[0];return n.splice(t.id2,0,r),Object(je.a)(Object(je.a)({},e),{},{selectedWorkout:Object(je.a)(Object(je.a)({},e.selectedWorkout),{},{exercises:n})});case"UPDATE_EXERCISE":var o=e.selectedWorkout.exercises.findIndex((function(e){return e.id===t.id})),a={name:t.exerciseName,noOfReps:+t.noOfReps,lengthOfRep:+t.lengthOfRep,restBetweenReps:+t.noOfReps>1?Math.floor(+t.restBetweenReps):1,noOfSets:+t.noOfSets,restBetweenSets:+t.noOfSets>1?Math.floor(+t.restBetweenSets):1,id:t.id},u=Object(m.a)(e.selectedWorkout.exercises);return u[o]=a,Object(je.a)(Object(je.a)({},e),{},{selectedWorkout:Object(je.a)(Object(je.a)({},e.selectedWorkout),{},{exercises:u})});case"CREATE_EXERCISE":return Object(je.a)(Object(je.a)({},e),{},{selectedWorkout:Object(je.a)(Object(je.a)({},e.selectedWorkout),{},{exercises:e.selectedWorkout.exercises.concat([{name:t.exerciseName,noOfReps:+t.noOfReps,lengthOfRep:+t.lengthOfRep,restBetweenReps:+t.noOfReps>1?Math.floor(+t.restBetweenReps):1,noOfSets:+t.noOfSets,restBetweenSets:+t.noOfSets>1?Math.floor(+t.restBetweenSets):1,id:t.id}])})});case"DELETE_EXERCISE":var i=e.selectedWorkout.exercises.filter((function(e){return e.id!==t.id}));return Object(je.a)(Object(je.a)({},e),{},{selectedWorkout:Object(je.a)(Object(je.a)({},e.selectedWorkout),{},{exercises:i})});case"UPDATE_WORKOUT":return Object(je.a)(Object(je.a)({},e),{},{selectedWorkout:Object(je.a)(Object(je.a)({},e.selectedWorkout),{},{cycles:Math.floor(+t.cycles),restBetweenCycles:Math.floor(+t.restBetweenCycles),restBetweenExercises:Math.floor(+t.restBetweenExercises)})});default:return e}},Be={authMessage:[],currentUser:{token:null,email:"",user:"",expires:""}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_SUCCESS":var n=t.data;return Object(je.a)(Object(je.a)({},e),{},{currentUser:{email:n.email,user:n.user||n.username,token:n.token,expires:n.expires},authMessage:[n.message]});case"AUTH_FAILURE":return Object(je.a)(Object(je.a)({},e),{},{authMessage:t.data});case"LOGOUT":return Object(je.a)(Object(je.a)({},e),{},{authMessage:[],currentUser:{token:null,email:"",user:"",expires:""}});default:return e}},Ie=n(13),Le=n(52),Ue=Ie.d,Ae=Object(Ie.c)({workout:Ce,util:ye,auth:Te}),Me=Object(Ie.e)(Ae,Ue(Object(Ie.a)(Le.a)));o.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(O.a,{store:Me,children:Object(C.jsx)(We,{})})}),document.getElementById("root"))},9:function(e,t,n){e.exports={SelectedWorkout:"SelectedWorkout_SelectedWorkout__1DVJf",WorkoutTitle:"SelectedWorkout_WorkoutTitle__3Gb4F",UL:"SelectedWorkout_UL__Z8LxA",SelectedControls:"SelectedWorkout_SelectedControls__JFgCv",EditWorkoutForm:"SelectedWorkout_EditWorkoutForm__ZmDEm",WorkoutIcon:"SelectedWorkout_WorkoutIcon__1GODw",WorkoutH1:"SelectedWorkout_WorkoutH1__paX9M",Confirm:"SelectedWorkout_Confirm__2ylnp",Draggable:"SelectedWorkout_Draggable__2SAN7",Button:"SelectedWorkout_Button__zEJ70",ButtonAbs:"SelectedWorkout_ButtonAbs__3uuIX"}}},[[82,1,2]]]);
//# sourceMappingURL=main.37bc17ab.chunk.js.map